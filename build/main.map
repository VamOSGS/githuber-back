{"version":3,"sources":["webpack:///webpack/bootstrap efa2cd314c54abb01889","webpack:///external \"koa-passport\"","webpack:///external \"koa-router\"","webpack:///external \"dotenv\"","webpack:///./src/index.js","webpack:///external \"koa\"","webpack:///external \"koa-session\"","webpack:///./src/routes/index.js","webpack:///external \"koa-combine-routers\"","webpack:///./src/routes/root.js","webpack:///./src/routes/auth.js","webpack:///./src/utlis/passport.js","webpack:///external \"passport-github\""],"names":["Koa","require","session","passport","routes","app","config","PORT","HOST","SECRET","process","env","keys","use","initialize","ctx","next","status","body","success","message","listen","console","log","combine","root","auth","module","exports","Router","get","req","user","FRONT_URL","authenticate","failureRedirect","redirect","logOut","GitHubStrategy","Strategy","NODE_ENV","GITHUB_CLIENT_ID","GITHUB_CLIENT_SECRET","clientID","clientSecret","callbackURL","accessToken","refreshToken","profile","cb","serializeUser","deserializeUser","obj"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap efa2cd314c54abb01889","module.exports = require(\"koa-passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-passport\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 2\n// module chunks = 0","const Koa = require('koa');\r\nconst session = require('koa-session');\r\nconst passport = require('koa-passport');\r\n\r\nconst routes = require('./routes');\r\n\r\nconst app = new Koa();\r\n\r\n/* eslint-disable-next-line global-require */\r\nif (process.env.NODE_ENV === 'development') require('dotenv').config();\r\n\r\nconst { PORT, HOST, SECRET } = process.env;\r\napp.keys = [SECRET];\r\n\r\napp\r\n  .use(session({}, app))\r\n  .use(passport.initialize())\r\n  .use(passport.session())\r\n  .use(routes);\r\n\r\napp.use((ctx, next) => {\r\n  if (ctx.status === 404) {\r\n    ctx.body = { success: false, message: 'Not found' };\r\n  }\r\n  next();\r\n});\r\n\r\napp.listen(PORT, () => {\r\n  console.log(`started in http://${HOST}:${PORT}`);\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"koa-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-session\"\n// module id = 6\n// module chunks = 0","const combine = require('koa-combine-routers');\r\nconst root = require('./root');\r\nconst auth = require('./auth');\r\n\r\nconst routes = combine([root, auth]);\r\n\r\nmodule.exports = routes;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/index.js","module.exports = require(\"koa-combine-routers\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-combine-routers\"\n// module id = 8\n// module chunks = 0","const Router = require('koa-router');\r\n\r\nconst root = new Router();\r\n\r\nroot.get('/', async (ctx) => {\r\n  ctx.body = ctx.req.user ? '<h1>LOGGED IN</h1>' : '<h1>NOT LOGGED IN</h1>';\r\n});\r\nroot.get('/test', async (ctx) => {\r\n  ctx.body = '<h1>test</h1>';\r\n});\r\n\r\nmodule.exports = root;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/root.js","const Router = require('koa-router');\r\nconst passport = require('../utlis/passport');\r\n/* eslint-disable-next-line global-require */\r\nif (process.env.NODE_ENV === 'development') require('dotenv').config();\r\n\r\nconst { FRONT_URL } = process.env;\r\nconst auth = new Router();\r\n\r\nauth.get('/auth', passport.authenticate('github'));\r\n\r\nauth.get('/auth/callback', passport.authenticate('github', { failureRedirect: '/login' }), (ctx) => {\r\n  ctx.redirect(FRONT_URL);\r\n});\r\n\r\nauth.get('/profile', (ctx) => {\r\n  ctx.body = ctx.req.user || {\r\n    message: 'Logged out',\r\n  };\r\n});\r\nauth.get('/auth/logout', async (ctx) => {\r\n  await ctx.logOut();\r\n  ctx.body = {\r\n    message: 'Logged out',\r\n  };\r\n  ctx.redirect(FRONT_URL);\r\n});\r\n\r\nmodule.exports = auth;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/auth.js","const GitHubStrategy = require('passport-github').Strategy;\r\nconst passport = require('koa-passport');\r\n/* eslint-disable-next-line global-require */\r\nif (process.env.NODE_ENV === 'development') require('dotenv').config();\r\n\r\n// eslint-disable-next-line object-curly-newline\r\nconst { PORT, HOST, NODE_ENV, GITHUB_CLIENT_ID, GITHUB_CLIENT_SECRET } = process.env;\r\n\r\npassport.use(new GitHubStrategy(\r\n  {\r\n    clientID: GITHUB_CLIENT_ID,\r\n    clientSecret: GITHUB_CLIENT_SECRET,\r\n    callbackURL: `http://${HOST}${NODE_ENV === 'development' && `:${PORT}`}/auth/callback`,\r\n  },\r\n  (accessToken, refreshToken, profile, cb) => cb(null, profile),\r\n));\r\npassport.serializeUser((user, cb) => {\r\n  cb(null, user);\r\n});\r\n\r\npassport.deserializeUser((obj, cb) => {\r\n  cb(null, obj);\r\n});\r\n\r\nmodule.exports = passport;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utlis/passport.js","module.exports = require(\"passport-github\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-github\"\n// module id = 12\n// module chunks = 0"],"sourceRoot":""}